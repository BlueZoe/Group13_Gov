{"remainingRequest":"E:\\Government\\client2.0\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Government\\client2.0\\client\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Government\\client2.0\\client\\src\\views\\Login.vue","mtime":1575539273614},{"path":"E:\\Government\\client2.0\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Government\\client2.0\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\Government\\client2.0\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Government\\client2.0\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2dWVJbWdWZXJpZnkgZnJvbSAnQC9jb21wb25lbnRzL3Z1ZS1pbWctdmVyaWZ5JwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIGNvbnN0IHZhbGlkYXRlVmVyaWZ5Y29kZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHRoaXMuaW1nQ29kZS50b0xvd2VyQ2FzZSgpICE9PSB2YWx1ZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3ZhbGlkYXRlVmVyaWZ5Y29kZTonLHZhbHVlKQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5q2j56Gu55qE6aqM6K+B56CBJykpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKQogICAgICB9CiAgICB9CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICB2ZXJpZnljb2RlOiAnJwogICAgICB9LAogICAgICBpc2xvZ2luOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeeUqOaIt+WQjSIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgICB2ZXJpZnljb2RlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6aqM6K+B56CBJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICAvLyB7IHZhbGlkYXRvcjogdmFsaWRhdGVWZXJpZnljb2RlLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgaW1nQ29kZTonJwogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICByYW5kb21OdW0obWluLCBtYXgpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbikKICAgIH0sCiAgICAvLyByZWZyZXNoQ29kZSgpIHsKICAgIC8vICAgdGhpcy5pZGVudGlmeUNvZGUgPSAnJwogICAgLy8gICB0aGlzLm1ha2VDb2RlKHRoaXMuaWRlbnRpZnlDb2RlcywgNCkKICAgIC8vIH0sCi8qICAgIG1ha2VDb2RlKG8sIGwpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgICB0aGlzLmdldEltZ0NvZGUgKz0gdGhpcy5pZGVudGlmeUNvZGVzWwogICAgICAgICAgdGhpcy5yYW5kb21OdW0oMCwgdGhpcy5pZGVudGlmeUNvZGVzLmxlbmd0aCkKICAgICAgICBdCiAgICAgIH0KICAgIH0sKi8KICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAvLyDmoKHpqozpqozor4HnoIEKICAgICAgICAgICAgaWYgKHRoaXMuaW1nQ29kZS50b0xvd2VyQ2FzZSgpICE9PSB0aGlzLmZvcm0udmVyaWZ5Y29kZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLpqozor4HnoIHovpPlhaXmnInor6/vvIEiKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudnVlSW1nVmVyaWZ5LmhhbmRsZURyYXcoKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9naW4oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9LAogICAgYXN5bmMgbG9naW4oKSB7CiAgICAgIHRoaXMuaXNsb2dpbiA9IHRydWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGFwaS5sb2dpbih0aGlzLmZvcm0pOwogICAgICB0aGlzLmlzbG9naW4gPSBmYWxzZTsKICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuY29kZSA9PSAwKSB7CiAgICAgICAgLy8gICDnmbvlvZXmiJDlip8KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibG9naW4iLCB0cnVlKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXN1bHQuZGF0YS50b2tlbik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAibmV3aG9tZSIgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXN1bHQubXNnIHx8ICLor7fmsYLplJnor68iKTsKICAgICAgfQogICAgfSwKICAgIC8vIOeCueWHu+WbvueJh+iOt+WPlumqjOivgeeggQogICAgZ2V0SW1nQ29kZShjb2RlKSB7CiAgICAgIHRoaXMuaW1nQ29kZSA9IGNvZGUKICAgICAgY29uc29sZS5sb2coJ+mqjOivgeeggTogJyArIHRoaXMuaW1nQ29kZSkKICAgIH0KCiAgfSwKICBjb21wb25lbnRzOnsKICAgIHZ1ZUltZ1ZlcmlmeQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_wrap\">\n    <div class=\"welcome\">欢迎登录坪山区大数据分析平台</div>\n    <div class=\"from\">\n      <h2 class=\"title\"></h2>\n      <el-form class=\"xxxx\" ref=\"form\" :rules=\"rules\" size=\"small\" :model=\"form\" label-width=\"100px\">\n        <el-form-item label=\"账号\" prop=\"username\">\n          <el-input class=\"shishi\" v-model=\"form.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input show-password v-model=\"form.password\"></el-input>\n        </el-form-item>\n        <!-- <el-form-item label=\"验证码\" prop=\"verifycode\">\n          <el-input v-model=\"form.verifycode\"></el-input>\n          <el-image style=\"width: 140px; height: 34px\" :src=\"url\"></el-image>\n        </el-form-item> -->\n        <el-form-item label=\"验证码\" prop=\"verifycode\">\n          <el-input v-model=\"form.verifycode\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <div id=\"identifybox\">\n            <vue-img-verify @getImgCode=\"getImgCode\" ref=\"vueImgVerify\" />\n          </div>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"submitForm('form')\"\n            :loading=\"islogin\"\n          >{{islogin ? \"登录中\" : ' 登录 '}}</el-button>\n          <el-button type=\"primary\" size=\"small\" @click=\"resetForm('form')\"> 重置 </el-button>\n        </el-form-item>\n      </el-form>\n      <div class=\"bg\">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport vueImgVerify from '@/components/vue-img-verify'\nexport default {\n  data() {\n    const validateVerifycode = (rule, value, callback) => {\n      if (this.imgCode.toLowerCase() !== value.toLowerCase()) {\n        console.log('validateVerifycode:',value)\n        callback(new Error('请输入正确的验证码'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n        verifycode: ''\n      },\n      islogin: false,\n      rules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" }\n        ],\n        password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\n          verifycode: [\n          { required: true, message: '请输入验证码', trigger: 'blur' },\n          // { validator: validateVerifycode, trigger: 'blur' }\n        ]\n      },\n      imgCode:''\n    };\n  },\n\n  methods: {\n    randomNum(min, max) {\n      return parseInt(Math.random() * (max - min) + min)\n    },\n    // refreshCode() {\n    //   this.identifyCode = ''\n    //   this.makeCode(this.identifyCodes, 4)\n    // },\n/*    makeCode(o, l) {\n      for (let i = 0; i < l; i++) {\n        this.getImgCode += this.identifyCodes[\n          this.randomNum(0, this.identifyCodes.length)\n        ]\n      }\n    },*/\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n            // 校验验证码\n            if (this.imgCode.toLowerCase() !== this.form.verifycode.toLowerCase()) {\n                this.$message.error(\"验证码输入有误！\");\n                this.$refs.vueImgVerify.handleDraw()\n                return\n            }\n          this.login();\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    async login() {\n      this.islogin = true;\n      const result = await this.$api.login(this.form);\n      this.islogin = false;\n      if (result && result.code == 0) {\n        //   登录成功\n        localStorage.setItem(\"login\", true);\n        localStorage.setItem(\"token\", result.data.token);\n        this.$router.push({ name: \"newhome\" });\n      } else {\n        this.$message.error(result.msg || \"请求错误\");\n      }\n    },\n    // 点击图片获取验证码\n    getImgCode(code) {\n      this.imgCode = code\n      console.log('验证码: ' + this.imgCode)\n    }\n\n  },\n  components:{\n    vueImgVerify\n  }\n}\n</script>\n\n<style lang=\"scss\" >\n\n.identifybox{\n  display: flex;\n  justify-content:space-between;\n  margin-top: 7px;\n}\n.login_wrap {\n  width: 100vw;\n  height: 100vh;\n  background-color: #6e7070fa;\n  background-image: url(../assets/bg1.png);// 此处为登录页面背景图\n  background-size: cover;\n  background-repeat: no-repeat;\n  color: #fff;\n  .welcome{\n    padding-top: 4%;\n    padding-right: 5%;\n    font-size: 30px;\n    font-family: \"华文行楷\";\n  }\n}\n.el-form-item__label{\n  color:#e4edf8!important;\n}\n.xxxx .el-form-item__label {\n    color: #e4edf8;\n}\n.from {\n  //background-color: #d9dadb;\n  background-color:transparent;\n  padding: 20px 30px 0px 0px;\n  width: 340px;\n  border: 0px solid rgb(159, 190, 211);\n  border-radius: 6px;\n  position: fixed;\n  top: 15%;\n  left: 45%;\n  transform: translate(-50%);\n  .title {\n    color: rgb(213, 254, 242);\n    font-size: 18px;\n    text-align: center;\n    padding: 0px 0px 20px 40px;\n  }\n\n  .el-button--primary{\n    background-color: #235158;\n    border-color: #020536;\n    width: 80px;\n  }\n  /*.shishi .el-in*/\n  .el-button--text{\n    background-color: #89d6c8;\n    border-color: #89d6c8;\n    width: 80px;\n  }\n  .bg {\n    z-index: -1;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    // span {\n    // }\n  }\n}\n</style>\n"]}]}