{"remainingRequest":"E:\\study study hard\\Junior fall semester\\software engineering\\政府大数据治理\\client\\node_modules\\babel-loader\\lib\\index.js!E:\\study study hard\\Junior fall semester\\software engineering\\政府大数据治理\\client\\src\\api\\http.js","dependencies":[{"path":"E:\\study study hard\\Junior fall semester\\software engineering\\政府大数据治理\\client\\src\\api\\http.js","mtime":1572179876000},{"path":"E:\\study study hard\\Junior fall semester\\software engineering\\政府大数据治理\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\study study hard\\Junior fall semester\\software engineering\\政府大数据治理\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlci9pbmRleCI7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAiaHR0cDovLzEyNy4wLjAuMTo3MDAxL2FwaSI7CnZhciBzdGF0dXMgPSBmYWxzZTsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICB2YXIgaXNMb2dpbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dpbiIpOwogIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB0b2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICByZXNwb25zZSA9IHJlc3BvbnNlLmRhdGE7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSBlbHNlIHsKICAgIE1lc3NhZ2UuZXJyb3IoIuivt+axguWksei0pSzor7fph43mlrDlsJ3or5UiKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDAxICYmICFzdGF0dXMpIHsKICAgIHN0YXR1cyA9IHRydWU7CiAgICBNZXNzYWdlQm94LmNvbmZpcm0oJ+i6q+S7veW3sui/h+acn+aIluacqueZu+W9lSzmmK/lkKbliY3lvoDnmbvlvZUnLCAn5o+Q56S6JywgewogICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICB0eXBlOiAnd2FybmluZycKICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBzdGF0dXMgPSBmYWxzZTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImxvZ2luIik7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAibG9naW4iCiAgICAgIH0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICBzdGF0dXMgPSBmYWxzZTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["E:/study study hard/Junior fall semester/software engineering/政府大数据治理/client/src/api/http.js"],"names":["axios","Message","MessageBox","router","defaults","baseURL","status","interceptors","request","use","config","isLogin","localStorage","getItem","token","headers","Authorization","error","Promise","reject","response","data","confirm","confirmButtonText","cancelButtonText","type","then","removeItem","push","name","catch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,YAApC;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAyB,2BAAzB;AACA,IAAIC,MAAM,GAAG,KAAb;AAEAN,KAAK,CAACO,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACrC,MAAIC,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,MAAIC,KAAK,GAAGF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAGC,KAAH,EAAS;AACLJ,IAAAA,MAAM,CAACK,OAAP,CAAeC,aAAf,GAA+BF,KAA/B;AACH;;AACD,SAAOJ,MAAP;AACH,CAPD,EAOG,UAAAO,KAAK,EAAI;AACR,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CATD;AAWAjB,KAAK,CAACO,YAAN,CAAmBa,QAAnB,CAA4BX,GAA5B,CAAgC,UAAAW,QAAQ,EAAI;AACxC,MAAIA,QAAQ,CAACd,MAAT,IAAmB,GAAvB,EAA4B;AACxBc,IAAAA,QAAQ,GAAGA,QAAQ,CAACC,IAApB;AACA,WAAOD,QAAP;AACH,GAHD,MAGO;AACHnB,IAAAA,OAAO,CAACgB,KAAR,CAAc,YAAd;AACH;AACJ,CAPD,EAOG,UAAAA,KAAK,EAAI;AACR,MAAIA,KAAK,CAACG,QAAN,CAAed,MAAf,IAAyB,GAAzB,IAAgC,CAACA,MAArC,EAA6C;AACzCA,IAAAA,MAAM,GAAG,IAAT;AACAJ,IAAAA,UAAU,CAACoB,OAAX,CAAmB,kBAAnB,EAAuC,IAAvC,EAA6C;AACzCC,MAAAA,iBAAiB,EAAE,IADsB;AAEzCC,MAAAA,gBAAgB,EAAE,IAFuB;AAGzCC,MAAAA,IAAI,EAAE;AAHmC,KAA7C,EAIGC,IAJH,CAIQ,YAAM;AACVpB,MAAAA,MAAM,GAAG,KAAT;AACAM,MAAAA,YAAY,CAACe,UAAb,CAAwB,OAAxB;AACAxB,MAAAA,MAAM,CAACyB,IAAP,CAAY;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAZ;AACH,KARD,EAQGC,KARH,CAQS,YAAM;AACXxB,MAAAA,MAAM,GAAG,KAAT;AACA,aAAOY,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,KAXD;AAYH,GAdD,MAcO;AACH,WAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH;AAEJ,CA1BD;AA6BA,eAAejB,KAAf","sourcesContent":["import axios from \"axios\"\nimport { Message, MessageBox } from 'element-ui';\nimport router from \"@/router/index\"\naxios.defaults.baseURL = \"http://127.0.0.1:7001/api\";\nlet status = false;\n\naxios.interceptors.request.use(config => {\n    let isLogin = localStorage.getItem(\"login\");\n    let token = localStorage.getItem(\"token\");\n    if(token){\n        config.headers.Authorization = token;\n    }\n    return config;\n}, error => {\n    return Promise.reject(error);\n})\n\naxios.interceptors.response.use(response => {\n    if (response.status == 200) {\n        response = response.data;\n        return response;\n    } else {\n        Message.error(\"请求失败,请重新尝试\");\n    }\n}, error => {\n    if (error.response.status == 401 && !status) {\n        status = true;\n        MessageBox.confirm('身份已过期或未登录,是否前往登录', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n        }).then(() => {\n            status = false;\n            localStorage.removeItem(\"login\");\n            router.push({ name: \"login\" });\n        }).catch(() => {\n            status = false;\n            return Promise.reject(error);\n        });\n    } else {\n        return Promise.reject(error);\n    }\n\n})\n\n\nexport default axios;"]}]}